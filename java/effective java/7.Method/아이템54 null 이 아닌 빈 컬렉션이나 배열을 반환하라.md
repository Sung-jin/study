## null 이 아닌 빈 컬렉션이나 배열을 반환하라

```java
public List<Foo> something() {
    return condition ? List.of(...) : null;
}

List<Foo> some = something();

if (some != null) { ... }
```

* 위와 같이 null 이 가능한 배열을 반환하면 사용하는 곳에서 null 에 대한 체크를 해줘야만 한다
    * 즉, 항상 방어코드가 있어야 하며, 없다면 오류(NPE) 가 발생할 수 있다
    * 이러한 null 은 특별히 취급해줘야 해서 코드가 더 복잡해진다
* 빈 컨테이너도 비용이 발생하므로 null 을 반환하는게 좋다고 생각할 수 있지만, 다음과 같은 이유로 잘못된 주장이다
    1. 성능분석 결과가 성능 저하의 주범이라고 확인되지 않는한 이정도의 성능 차이는 신경 쓸 수준이 안된다
    2. 빈 컬렉션과 배열은 굳이 새로 할당하지 않고도 반환할 수 있다
* 사용 패턴에 따라 빈 컬렉션 할당이 성능을 눈에 띄게 떨어뜨릴 순 있으나, 똑같은 빈 불변 컬렉션을 반환하는 것으로 해결이 가능하다
    * `Collections.emptyList/emptySet/emptyMap` 등이 있다
* 배열을 반환하는 메서드의 경우에도 null 대신 빈 배열을 반환해야 한다

## 정리

* null 이 아닌 빈 배열이나 컬렉션을 반환해야 한다
* null 을 반환하는 api 는 사용하기 어렵고 오류 처리 코드도 늘어나며, 성능 측면으로도 좋은 것이 아니다

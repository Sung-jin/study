## 라이브러리를 익히고 사용하라

```java
static Random rnd = new Random();

static int random(int n) {
    return Math.abs(rnd.nextInt()) % n;
}
```

* 위의 랜덤 숫자 메소드의 경우 다음과 같은 문제가 존재한다
    1. n 이 크지않은 2의 제곱수라면 얼마 지나지 않아 같은 수열이 반복된다
    2. n 이 2 의 제곱수가 아니라면 몇몇 숫자가 평균적으로 더 자주 반환되며, n 이 클수록 이러한 현상을 더욱 두드러진다
    3. 지정한 범위 바깥의 수가 종종 튀어나올 수 있다
        * `Math.abs(Integer.MIN_VALUE)` 의 결과는 `Integer.MIN_VALUE` 이다
* 위와 같은 문제가 발생 할 수 있으며, 이러한 난수 발생기는 `Random.nextInt(int)` 에 잘 구현되어 있다
* Java 7 부터는 Random 이 아닌 ThreadLocalRandom 으로 대체하는게 좋으며 대부분 잘 동작한다
    * Random 보다 더 고품질의 난수가 발생하고 속도도 더 빠르다
    * 포크-조인 풀이나 병렬 스트림에서는 SplittableRandom 을 사용해야 한다
* 표준 라이브러리는 핵심적인 일과 크게 관련없는 문제를 해결하기 위해 시간을 낭비하는 것을 방지해준다
* 별다른 노력을 하지 않아도 표준 라이브러리는 지속적으로 성능 개선이 진행되므로, 해당 라이브러리를 사용한 곳에도 성능이 좋아지는 효과가 있다
* 표준 라이브러리는 기능이 점점 많아지며 부족한 부분이 있어도 커뮤니티 등을 통해 논의된 후 기능이 추가/개선이 될 여지가 높다
* 표준 라이브러리는 '표준' 이기 때문에 모두가 읽고 이해하기 쉬운 코드로서 작성되고 사용되기 쉽다

### 표준 라이브러리 사용

* 라이브러리에 기능이 구현되어 있음을 모르고 많은 개발자들은 직접 구현하여 사용하는 경우가 많다

```java
try (InputStream in = new URL("someURL").openStream()) {
    in.treansferTo(System.out);
}
// 지정한 URL 의 내용을 가져오는 기능
// 위와 같이 직접 구현한다면 고려해야 하는 부분이 많은 기능을 쉽게 사용이 가능하다
```

* 라이브러리가 방대하여 모든 API 를 활용하기는 어렵지만, `java.lang`/`java.util`/`java.io` 와 그 하위 패키지에는 익숙해야 한다
* 또한 컬렉션 프레임워크와 스트림 라이브러리, `java.util.concurrent` 등도 알아두면 좋고 알아두어야 한다

### 정리

* 라이브러리가 필요한 기능을 충분히 제공하지 못할 수 있지만, 라이브러리를 사용하려고 시도하는게 좋다
    * 어떤 영역의 기능을 제공하는지 살펴보고 원하는 기능이 아니라면 대안을 사용해야 한다
* 표준 라이브러리에서 찾지 못한다면, 고품질의 서드파티 라이브러리를 활용해도 좋다
    * 대표적으로 구글의 구아바 라이브러리가 있다
* 특정한 상황의 특별한 기능이 아닌 이상 대부분의 기능은 라이브러리에 구현되어 있다
    * 라이브러리가 있다면 사용하는게 좋고, 모른다면 찾아보는게 좋다
    * 이러한 라이브러리는 직접 작성하는 것보다 안전하고 최적화되어있고 품질이 더 좋으며 해당 부분을 신경쓰지 않고 도메인 로직에만 집중할 수 있게 해준다

## 예외의 상세 메시지에 실패 관련 정보를 담으라

* 예외가 발생하여 프로그램이 실패하면 자바 시스템은 예외 스택 추적 정보를 자동으로 출력한다
    * 스택 추적은 예외 객체의 toString 메서드를 호출하여 얻는 문자열이며, 보통은 예외의 클래스 이름 뒤에 상세 메시지가 붙는 형태이다
    * 이러한 정보가 실패 원인을 분석해야 하는 프로그래머 또는 SRE 가 얻을 수 있는 유일한 정보인 경우가 많다
* 실패를 재현하기 어렵다면 더 자세한 정보를 얻기가 어렵거나 불가능 하므로, 실패 원인에 관한 정보를 가능한 많이 담아 반환하는 일은 아주 중요하다
* 정리하면 사후 분석을 위해 실패 순간의 상황을 정확히 포착하여 예외의 상세 메시지에 담아야 한다

### 실패 포착

* 실패 순간을 포착하려면 발생한 예외의 관여된 모든 매개변수와 필드의 값을 실패 메시지에 담아야 한다
    * 예를들어 IndexOutOfBoundsException 의 상세 메시지는 범위의 최솟값과 최댓값, 그리고 범위를 벗어났다는 인덱스의 값을 담아야 한다
* 이상의 현상들은 모두 원인이 다르므로, 현상을 보면 무엇을 고쳐야 할지를 분석하는데 도움이 된다
* 이러한 실패 관련 모든 데이터를 담아야 하지만 장황할 필요는 없다
    * 실패를 분석할 경우 스택 추적뿐 아니라 관련 문서와 코드를 함께 살펴보며, 스택 추적에는 예외가 발생한 파일 이름과 줄번호는 물론 스택에서 호출한 다른 메서드들의 파일 이름과 줄번호까지 기록되어 있는게 대부분이기 때문이다

### 예외 메시지

* 예외의 상세 메시지와 최종 사용자에게 보여줄 오류 메시지를 혼동해서는 안 된다
    * 이는 최종 사용자에게 보여줄 메시지는 친절한 안내 메시지를 보여줘야 하고, 예외 메시지는 가독성보다 담긴 내용이 훨씬 중요하다는 의미이다

## 정리

* 예외는 실패와 관련한 정보를 얻을 수 있는 접근자 메서드를 적절히 제공하는 것이 좋다
* 포착한 실패 정보는 예외 상황을 복구하는 데 유용할 수 있으므로 접근자 메서드는 비검사 예외보다는 검사 예외에서 더 빛을 발한다
* 비검사 예외의 상세 정보에 프로그램적으로 접근하길 우너하는 프로그래머는 드물것이다
* 하지만 toString 이 반환하는 값에 포함된 정보를 얻어올 수 있는 API 를 제공하자는 관점에서, 비검사 예외라도 상세 정보를 알려주는 접근자 메서드를 제공하는 것은 권장한다
